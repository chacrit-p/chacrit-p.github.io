<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body>
    <div class="container py-10 mx-auto">
      <img
        class="mx-auto"
        src="/public/assets/images/pokeapi.png"
        alt="pokeapi"
      />
      <p class="mx-auto max-w-lg text-center mt-5 text-lg p-3 md:p-0">
        All the Pok√©mon data you'll ever need in one place, easily accessible
        through a modern free open-source RESTful API.
      </p>
      <div
        class="mx-auto max-w-4xl mt-10 flex justify-center gap-3"
        id="pokemon"
      ></div>
    </div>

    <script>
      const pokemonDiv = document.getElementById("pokemon");

      const renderPokemon = (pokemon) => {
        document.title = pokemon.name;
        const main = document.createElement("div");

        const img = document.createElement("img");
        img.className = "mx-auto";
        img.src = pokemon.sprites.front_default;
        main.appendChild(img);

        const h1 = document.createElement("h1");
        h1.className = "text-center text-2xl font-semibold capitalize";
        h1.textContent = pokemon.name;
        main.appendChild(h1);

        const types = pokemon.types;
        types.forEach((type) => {
          const typeElement = document.createElement("span");
          typeElement.className = "badge badge-primary mr-2 mb-2 mt-2";
          typeElement.textContent = type.type.name;
          main.appendChild(typeElement);
        });

        main.appendChild(document.createElement("br"));

        const weight = document.createElement("span");
        weight.className = "mr-4";
        weight.innerHTML = `weight: ${pokemon.weight}`;
        main.appendChild(weight);

        const height = document.createElement("span");
        height.innerHTML = `height: ${pokemon.height}`;
        main.appendChild(height);

        pokemonDiv.appendChild(main);
      };

      const getUrlParameter = (name) => {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        return urlParams.get(name);
      };

      const getPokemon = (url) => {
        axios
          .get(url)
          .then((res) => {
            renderPokemon(res.data);
          })
          .catch((err) => {
            console.log(err);
          });
      };

      const url =
        "https://pokeapi.co/api/v2/pokemon/" + getUrlParameter("name");
      getPokemon(url);
    </script>
  </body>
</html>
